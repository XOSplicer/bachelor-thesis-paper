% !TEX root = ../master.tex
\chapter{Implementation and Evaluation}
\label{chap:impl}

%TODO
%similar systems which have a broader scope already papented by otis:
%\autocite{lin2011control}
%\autocite{xang2016trafficlist}
%\section{Volume Estimation in Cabins}
%TODO elipses \autocite[][Chap.~2]{starkosch2010handbook}
%\section{Volume Estimation in Front of Doors}
%\section{Integration into Existing Scheduling Algorithms}
%security considerations?
%other usecases such as door control
%TODO
%\section{Validation}

\section{Visual System}
TODO
\subsection{Implementation with OpenCV and Python}

based on \autocite[][]{xocoatzin2013voxelcarving}

TODO
\subsection{Test Execution}
elevator setup: measurements, camera positions
scenario: empty, single person, 2 persons, 3 persons, only carton, 1+ carton, 2+ carton
TODO
\subsection{Result Evaluation}
general concept feasible
small viewing angle: person out of frame
poor foreground separation by only applying background subtraction
non-correct othorgonal intersection implemented

TODO

\section{Scheduling Algorithm}
TODO
\subsection{Implementation of Simulation}

TODO

The simulation is implemented in the \emph{Rust} programming language.
Rust is a programming language initially developed by Mozilla.
According to its website it is a \enquote{systems programming language that runs blazingly fast, prevents segfaults, and guarantees thread safety} \autocite{rust2018rust}.
It features an expressive static type system and can be used to build applications that take advantage of modern hardware
\autocite[][]{matsakis2014rust}.
The rust compiler targets common platforms and operating and compiles source code to native machine code.
The language is chosen, since the author is proficient in it.

TODO describe cargo invocation, describe general programm flow
\subsection{Evaluation of Simulation Results}

\begingroup
\renewcommand*{\arraystretch}{1.0}
\begin{table}[]
\centering
\begin{tabular}{llrrr}
                                      &     & \begin{minipage}{2cm}\textbf{Sequential Control} \vspace{1em}\end{minipage} & \begin{minipage}{2cm}\textbf{Collective Control} \vspace{1em}\end{minipage} & \begin{minipage}{2cm}\textbf{Adaptive Control} \vspace{1em}\end{minipage}\\ \hline
\multirow{4}{*}{\textbf{Total passengers}}     & \textbf{min}        & 57.00                                                                                                                                             & 57.00                                                                                                                                             & 57.00                                                                                                                                           \\
                                               & \textbf{max}        & 113.00                                                                                                                                            & 113.00                                                                                                                                            & 113.00                                                                                                                                          \\
                                               & \textbf{avg}        & 84.09                                                                                                                                             & 84.09                                                                                                                                             & 84.09                                                                                                                                           \\
                                               & \textbf{$ \sigma $} & 8.97                                                                                                                                              & 8.97                                                                                                                                              & 8.97                                                                                                                                            \\ \hline
\multirow{4}{*}{\textbf{Total cargo}}          & \textbf{min}        & 9.00                                                                                                                                              & 9.00                                                                                                                                              & 9.00                                                                                                                                            \\
                                               & \textbf{max}        & 42.00                                                                                                                                             & 42.00                                                                                                                                             & 42.00                                                                                                                                           \\
                                               & \textbf{avg}        & 24.10                                                                                                                                             & 24.10                                                                                                                                             & 24.10                                                                                                                                           \\
                                               & \textbf{$ \sigma $} & 4.95                                                                                                                                              & 4.95                                                                                                                                              & 4.95                                                                                                                                            \\ \hline
\multirow{4}{*}{\textbf{Stops}}                & \textbf{min}        & 102.00                                                                                                                                            & 93.00                                                                                                                                             & 96.00                                                                                                                                           \\
                                               & \textbf{max}        & 135.00                                                                                                                                            & 158.00                                                                                                                                            & 157.00                                                                                                                                          \\
                                               & \textbf{avg}        & 118.47                                                                                                                                            & 125.75                                                                                                                                            & 129.60                                                                                                                                          \\
                                               & \textbf{$ \sigma $} & 5.22                                                                                                                                              & 10.41                                                                                                                                             & 9.30                                                                                                                                            \\ \hline
\multirow{4}{*}{\textbf{Passengers delivered}} & \textbf{min}        & 37.00                                                                                                                                             & 46.00                                                                                                                                             & 53.00                                                                                                                                           \\
                                               & \textbf{max}        & 65.00                                                                                                                                             & 107.00                                                                                                                                            & 108.00                                                                                                                                          \\
                                               & \textbf{avg}        & 49.32                                                                                                                                             & 78.06                                                                                                                                             & 79.67                                                                                                                                           \\
                                               & \textbf{$ \sigma $} & 4.24                                                                                                                                              & 9.45                                                                                                                                              & 8.75                                                                                                                                            \\ \hline
\multirow{4}{*}{\textbf{Cargo delivered}}      & \textbf{min}        & 3.00                                                                                                                                              & 3.00                                                                                                                                              & 4.00                                                                                                                                            \\
                                               & \textbf{max}        & 23.00                                                                                                                                             & 29.00                                                                                                                                             & 33.00                                                                                                                                           \\
                                               & \textbf{avg}        & 14.13                                                                                                                                             & 14.61                                                                                                                                             & 19.80                                                                                                                                           \\
                                               & \textbf{$ \sigma $} & 3.20                                                                                                                                              & 3.54                                                                                                                                              & 4.38                                                                                                                                            \\ \hline
\multirow{4}{*}{\textbf{Waiting time / s}}     & \textbf{min}        & 1.50                                                                                                                                              & 0.00                                                                                                                                              & 0.00                                                                                                                                            \\
                                               & \textbf{max}        & 2873.50                                                                                                                                           & 202.60                                                                                                                                            & 662.70                                                                                                                                          \\
                                               & \textbf{avg}        & 688.09                                                                                                                                            & 41.25                                                                                                                                             & 53.03                                                                                                                                           \\
                                               & \textbf{$ \sigma $} & 499.11                                                                                                                                            & 32.63                                                                                                                                             & 48.98                                                                                                                                           \\ \hline
\multirow{4}{*}{\textbf{Ride time / s}}        & \textbf{min}        & 13.00                                                                                                                                             & 13.00                                                                                                                                             & 13.00                                                                                                                                           \\
                                               & \textbf{max}        & 64.00                                                                                                                                             & 2180.20                                                                                                                                           & 1809.70                                                                                                                                         \\
                                               & \textbf{avg}        & 29.57                                                                                                                                             & 125.35                                                                                                                                            & 102.29                                                                                                                                          \\
                                               & \textbf{$ \sigma $} & 13.92                                                                                                                                             & 160.37                                                                                                                                            & 130.77                                                                                                                                         
\end{tabular}
\caption{\label{tab:impl:simulationresults} Simulation results for tested scheduling algorithms}
\end{table}
\endgroup

TODO

see table \ref{tab:impl:simulationresults}
key points:

\begin{itemize}
    \item Adaptive control delivers \textbf{more cargo items} on average than sequential control (\texttt{+}40.13~\%) and collective control (\texttt{+}35.52~\%).
    \item Collective control (\texttt{+}58.27~\%) and adaptive control (\texttt{+}61.53~\%) deliver \textbf{more passengers} on average compared to sequential control. 
    \item Sequential control shows a drastically higher mean waiting time then the other two (\texttt{+}1568.09~\%, \texttt{+}1297.55~\%). However a significantly lower ride time (\texttt{-}76.41~\%, \texttt{-}71.09~\%), which is is only linear dependent on the travel distance.
    \item Adaptive control shows a slightly higher average waiting time (\texttt{+}30.56~\%) but has a lower (\texttt{-}18.40~\%) average wait time, which is less spread (\texttt{-}18.46~\%) compared to collective control.
\end{itemize}

\section{Economic Considerations}
TODO

- possible customers
- possible use cases
- cost structure from hardware and software
- savings possible from improved scheduling


\section{Privacy Considerations}
TODO
- long term storage not neccessary for real time analysis of volumes
- face detection not necessary / no identification needed
- time space tracking of individuals can be beneficial for algorithm
- need to inform people of beeing filmed
- missuse oppertunities: syste must not be online, but if accessible from outside the video feed is a target of threats

EN 62676-4 category "Detektieren (Erfassung)" -> no need for high resulotion images

\autocite[][]{bmjv2009bdsg} \autocite[][]{eu2016gdpr}

\section{Conclusion}
TODO